<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Blueprint Diagrams | Webomage</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Blueprint Diagrams" />
<meta name="author" content="Aleksei Tcelishchev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="DevOps, Integration, AI/LLM, Fullstack, Mobile &amp; Compliance Engineering led by Aleksei Tcelishchev" />
<meta property="og:description" content="DevOps, Integration, AI/LLM, Fullstack, Mobile &amp; Compliance Engineering led by Aleksei Tcelishchev" />
<link rel="canonical" href="http://localhost:4000/blueprints/" />
<meta property="og:url" content="http://localhost:4000/blueprints/" />
<meta property="og:site_name" content="Webomage" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Blueprint Diagrams" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Aleksei Tcelishchev","url":"https://webomage.com"},"description":"DevOps, Integration, AI/LLM, Fullstack, Mobile &amp; Compliance Engineering led by Aleksei Tcelishchev","headline":"Blueprint Diagrams","url":"http://localhost:4000/blueprints/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
  <link rel="icon" href="/assets/favicon-16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/assets/favicon-32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon-180.png" sizes="180x180"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Webomage" /></head>
<body>

    <a href="#" class="scroll-to-top" aria-label="Scroll to top">▲ Top</a><header class="site-header" role="banner">

  <div class="wrapper"><!-- <a class="site-title" rel="author" href="/">Webomage</a> -->
    <div class="site-header-inner">
      <div class="site-branding">
        <a class="site-logo" rel="author" href="/" aria-label="Webomage home">
          <img src="/assets/logo.svg" alt="Webomage logo">
        </a>
      </div><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Home</a><a class="page-link" href="/services/">Services</a><a class="page-link" href="/solutions/">Solutions</a><a class="page-link" href="/news/">News</a><a class="page-link" href="/team/">Team</a><a class="page-link" href="/contact/" data-analytics-cta="nav_contact">Contact</a></div>
      </nav></div>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="site-bg-slideshow" aria-hidden="true">
        <div class="site-bg-slide site-bg-slide-1"></div>
        <div class="site-bg-slide site-bg-slide-2"></div>
        <div class="site-bg-slide site-bg-slide-3"></div>
        <div class="site-bg-slide site-bg-slide-4"></div>
        <div class="site-bg-slide site-bg-slide-5"></div>
      </div>
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Blueprint Diagrams</h1>
  </header>

  <div class="post-content">
    <p>This page collects the live Mermaid diagrams for the main Webomage blueprints.</p>

<p><strong>Legend</strong></p>

<ul>
  <li><strong>Architecture &amp; infra blueprints</strong> – platform-level diagrams (clusters, gateways, databases, observability).</li>
  <li><strong>Stack blueprints</strong> – application-stack patterns (LAMP, MERN, MEAN, MEVN, PERN) that often sit on top of those platforms.</li>
</ul>

<p>Labels on arrows indicate the protocol/port between components (for example, <code class="language-plaintext highlighter-rouge">443 HTTPS</code>, <code class="language-plaintext highlighter-rouge">80 HTTP</code>, <code class="language-plaintext highlighter-rouge">5432</code>, <code class="language-plaintext highlighter-rouge">6379</code>).</p>

<h2 id="site-map">Site map</h2>

<div class="mermaid">
%% Autogenerated by scripts/gen_sitemap_mmd.py; do not edit by hand.
graph TD
  home["Home (/)"]
  services["Services (/services/)"]
  solutions["Solutions (/solutions/)"]
  projects["Projects &amp; Case Studies (/projects/)"]
  ai_infra["AI &amp; LLM Infrastructure (/ai-infra/)"]
  devops_stack["DevOps &amp; Cloud Stack (/devops-stack/)"]
  blockchain["Blockchain &amp; Web3 (/blockchain/)"]
  blog["Blog (/blog/)"]
  news["News (/news/)"]
  team["Team (/team/)"]
  process["How We Work (/process/)"]
  cv["Curriculum Vitae (/cv/)"]
  resume["Resume (Short) (/resume/)"]
  contact["Contact (/contact/)"]
  home --&gt; services
  home --&gt; projects
  home --&gt; ai_infra
  home --&gt; devops_stack
  home --&gt; blockchain
  home --&gt; blog
  home --&gt; news
  home --&gt; team
  home --&gt; solutions
  home --&gt; process
  home --&gt; cv
  home --&gt; resume
  home --&gt; contact

</div>

<h2 id="architecture--infra-blueprints">Architecture &amp; infra blueprints</h2>

<h3 id="python-api-on-kubernetes-aws-eks">Python API on Kubernetes (AWS EKS)</h3>

<div class="mermaid">
%% Autogenerated from codemap python-api-k8s; do not edit by hand.
graph TD
  api["API service (service)"]
  db["Primary database (Postgres) (postgres)"]
  cache["Cache / queue (Redis) (redis)"]
  ingress["Ingress / load balancer (ingress)"]
  observability["Metrics &amp; logging stack (observability)"]
  api --&gt; db
  api --&gt; cache
  ingress --|80 HTTP|--&gt; api
  ingress --|443 HTTPS|--&gt; api

</div>

<h3 id="nodejs--nextjs-with-supabase">Node.js / Next.js with Supabase</h3>

<div class="mermaid">
%% Autogenerated from codemap node-next-supabase; do not edit by hand.
graph TD
  web["Next.js web app (frontend)"]
  api["Next.js API routes / app router handlers (service)"]
  supabase["Supabase project (Postgres, Auth, Storage) (backend-as-a-service)"]
  edge_functions["Supabase Edge Functions (function)"]
  storage["Supabase Storage buckets (storage)"]
  observability["Monitoring and logs (observability)"]
  web --|443 HTTPS|--&gt; api
  web --|443 HTTPS|--&gt; supabase
  api --|443 HTTPS|--&gt; supabase
  edge_functions --&gt; supabase
  storage --&gt; supabase

</div>

<h3 id="go-microservices-behind-an-api-gateway">Go microservices behind an API gateway</h3>

<div class="mermaid">
%% Autogenerated from codemap go-microservices-gateway; do not edit by hand.
graph TD
  gateway["API gateway / ingress controller (gateway)"]
  svc_public["Public HTTP API service (service)"]
  svc_admin["Admin / internal service (service)"]
  db["Postgres database (postgres)"]
  cache["Redis cache / queue (redis)"]
  observability["Metrics, logs, tracing (observability)"]
  gateway --|80 HTTP|--&gt; svc_public
  gateway --|443 HTTPS|--&gt; svc_public
  gateway --|80 HTTP|--&gt; svc_admin
  gateway --|443 HTTPS|--&gt; svc_admin
  svc_public --|80 HTTP|--&gt; db
  svc_public --|80 HTTP|--&gt; cache
  svc_admin --|8080 HTTP|--&gt; db

</div>

<h3 id="rust-api-with-postgres-and-redis">Rust API with Postgres and Redis</h3>

<div class="mermaid">
%% Autogenerated from codemap rust-api-postgres; do not edit by hand.
graph TD
  api["Rust API service (service)"]
  db["Postgres database (postgres)"]
  cache["Redis cache (redis)"]
  proxy["Nginx / reverse proxy (proxy)"]
  observability["Metrics and logs (observability)"]
  api --|80 HTTP|--&gt; db
  api --|80 HTTP|--&gt; cache
  proxy --|80 HTTP|--&gt; api
  proxy --|443 HTTPS|--&gt; api

</div>

<h2 id="stack-blueprints-lamp--mern--mean--mevn--pern">Stack blueprints (LAMP / MERN / MEAN / MEVN / PERN)</h2>

<h3 id="lamp-on-ec2--digitalocean-droplet">LAMP on EC2 / DigitalOcean Droplet</h3>

<div class="mermaid">
%% Autogenerated from codemap lamp-ec2-do; do not edit by hand.
graph TD
  vm["EC2 / Droplet VM (vm)"]
  web["Apache + PHP app (web)"]
  db["MySQL/MariaDB (mysql)"]
  cache["Optional cache (cache)"]
  lb["Load balancer / reverse proxy (load_balancer)"]
  monitoring["Monitoring &amp; backups (observability)"]
  vm --|22 SSH|--&gt; web
  vm --|80 HTTP|--&gt; web
  vm --|443 HTTPS|--&gt; web
  vm --|22 SSH|--&gt; db
  vm --|80 HTTP|--&gt; db
  vm --|443 HTTPS|--&gt; db
  web --|80 HTTP|--&gt; db
  web --|443 HTTPS|--&gt; db
  lb --|80 HTTP|--&gt; web
  lb --|443 HTTPS|--&gt; web
  monitoring --&gt; web
  monitoring --&gt; db

</div>

<h3 id="lemp-on-ec2--digitalocean-droplet">LEMP on EC2 / DigitalOcean Droplet</h3>

<div class="mermaid">
%% Autogenerated from codemap lemp-ec2-do; do not edit by hand.
graph TD
  vm["EC2 / Droplet VM (vm)"]
  web["Nginx + PHP-FPM app (web)"]
  db["MySQL/MariaDB (mysql)"]
  cache["Optional cache (cache)"]
  lb["Load balancer (load_balancer)"]
  monitoring["Monitoring &amp; logs (observability)"]
  vm --|22 SSH|--&gt; web
  vm --|80 HTTP|--&gt; web
  vm --|443 HTTPS|--&gt; web
  vm --|22 SSH|--&gt; db
  vm --|80 HTTP|--&gt; db
  vm --|443 HTTPS|--&gt; db
  web --|80 HTTP|--&gt; db
  web --|443 HTTPS|--&gt; db
  lb --|80 HTTP|--&gt; web
  lb --|443 HTTPS|--&gt; web
  monitoring --&gt; web
  monitoring --&gt; db

</div>

<h3 id="mern-on-ec2--digitalocean-droplet">MERN on EC2 / DigitalOcean Droplet</h3>

<div class="mermaid">
%% Autogenerated from codemap mern-ec2-do; do not edit by hand.
graph TD
  vm["EC2 / Droplet VM (vm)"]
  compose["docker-compose / container runtime (orchestrator)"]
  api["Node/Express API (service)"]
  frontend["React / Next.js frontend (frontend)"]
  db["MongoDB (mongodb)"]
  cdn["Static asset hosting / CDN (cdn)"]
  monitoring["Monitoring &amp; logs (observability)"]
  vm --|22 SSH|--&gt; compose
  vm --|80 HTTP|--&gt; compose
  vm --|443 HTTPS|--&gt; compose
  compose --&gt; api
  compose --&gt; db
  compose --&gt; frontend
  api --|3000 HTTP|--&gt; db
  frontend --|443 HTTPS|--&gt; api
  cdn --&gt; frontend
  monitoring --&gt; api
  monitoring --&gt; db

</div>

<h3 id="mean-on-ec2--digitalocean-droplet">MEAN on EC2 / DigitalOcean Droplet</h3>

<div class="mermaid">
%% Autogenerated from codemap mean-ec2-do; do not edit by hand.
graph TD
  vm["EC2 / Droplet VM (vm)"]
  compose["docker-compose / container runtime (orchestrator)"]
  api["Node/Express API (service)"]
  frontend["Angular SPA (frontend)"]
  db["MongoDB (mongodb)"]
  cdn["Static asset hosting / CDN (cdn)"]
  monitoring["Monitoring &amp; logs (observability)"]
  vm --|22 SSH|--&gt; compose
  vm --|80 HTTP|--&gt; compose
  vm --|443 HTTPS|--&gt; compose
  compose --&gt; api
  compose --&gt; db
  compose --&gt; frontend
  api --|3000 HTTP|--&gt; db
  frontend --|443 HTTPS|--&gt; api
  cdn --&gt; frontend
  monitoring --&gt; api
  monitoring --&gt; db

</div>

<h3 id="mevn-on-ec2--digitalocean-droplet">MEVN on EC2 / DigitalOcean Droplet</h3>

<div class="mermaid">
%% Autogenerated from codemap mevn-ec2-do; do not edit by hand.
graph TD
  vm["EC2 / Droplet VM (vm)"]
  compose["docker-compose / container runtime (orchestrator)"]
  api["Node/Express API (service)"]
  frontend["Vue / Nuxt frontend (frontend)"]
  db["MongoDB (mongodb)"]
  cdn["Static asset hosting / CDN (cdn)"]
  monitoring["Monitoring &amp; logs (observability)"]
  vm --|22 SSH|--&gt; compose
  vm --|80 HTTP|--&gt; compose
  vm --|443 HTTPS|--&gt; compose
  compose --&gt; api
  compose --&gt; db
  compose --&gt; frontend
  api --|3000 HTTP|--&gt; db
  frontend --|443 HTTPS|--&gt; api
  cdn --&gt; frontend
  monitoring --&gt; api
  monitoring --&gt; db

</div>

<h3 id="pern-on-ec2--digitalocean-droplet">PERN on EC2 / DigitalOcean Droplet</h3>

<div class="mermaid">
%% Autogenerated from codemap pern-ec2-do; do not edit by hand.
graph TD
  vm["EC2 / Droplet VM (vm)"]
  compose["docker-compose / container runtime (orchestrator)"]
  api["Node/Express API (service)"]
  frontend["React / Next.js frontend (frontend)"]
  db["PostgreSQL (postgres)"]
  cdn["Static asset hosting / CDN (cdn)"]
  monitoring["Monitoring &amp; logs (observability)"]
  vm --|22 SSH|--&gt; compose
  vm --|80 HTTP|--&gt; compose
  vm --|443 HTTPS|--&gt; compose
  compose --&gt; api
  compose --&gt; db
  compose --&gt; frontend
  api --|3000 HTTP|--&gt; db
  frontend --|443 HTTPS|--&gt; api
  cdn --&gt; frontend
  monitoring --&gt; api
  monitoring --&gt; db

</div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="footer-content">
      <div class="footer-primary">
        <div class="footer-branding">
          <img class="footer-logo" src="/assets/logo.svg" alt="Webomage logo">
          <h2 class="footer-heading">Webomage</h2>
          <div class="footer-social"><ul class="social-media-list"><li><a href="https://github.com/casualuser"><svg class="svg-icon"><use xlink:href="/assets/custom-social-icons.svg#github"></use></svg> <span class="username">casualuser</span></a></li><li><a href="https://www.linkedin.com/in/casualuser"><svg class="svg-icon"><use xlink:href="/assets/custom-social-icons.svg#linkedin"></use></svg> <span class="username">casualuser</span></a></li><li>
      <a href="https://upwork.com/freelancers/casualuser">
        <svg class="svg-icon svg-icon-upwork"><use xlink:href="/assets/custom-social-icons.svg#upwork"></use></svg>
        <span class="username">Upwork</span>
      </a>
    </li><li>
      <a href="https://t.me/casualuser">
        <svg class="svg-icon"><use xlink:href="/assets/custom-social-icons.svg#telegram"></use></svg>
        <span class="username">Telegram</span>
      </a>
    </li></ul>

</div>
        </div>
      </div>
    </div>
    <div class="footer-description">DevOps, Integration, AI/LLM, Fullstack, Mobile &amp; Compliance Engineering led by Aleksei Tcelishchev</div>
  </div>

</footer><script>
      (function() {
        var btn = document.querySelector('.scroll-to-top');
        if (!btn) return;

        window.addEventListener('scroll', function() {
          if (window.scrollY > 150) {
            btn.classList.add('is-visible');
          } else {
            btn.classList.remove('is-visible');
          }
        });

        btn.addEventListener('click', function(event) {
          event.preventDefault();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      })();
    </script>

    <script>
      (function() {
        var slides = Array.prototype.slice.call(document.querySelectorAll('.site-bg-slide'));
        if (!slides.length) return;

        // Base delays (seconds) from CSS: 0, 8, 16, 24, 32
        var delays = [0, 8, 16, 24, 32].slice(0, slides.length);

        // Fisher-Yates shuffle
        for (var i = delays.length - 1; i > 0; i--) {
          var j = Math.floor(Math.random() * (i + 1));
          var tmp = delays[i];
          delays[i] = delays[j];
          delays[j] = tmp;
        }

        slides.forEach(function(slide, idx) {
          slide.style.animationDelay = delays[idx] + 's';
        });
      })();
    </script>

    <script>
      (function() {
        var form = document.getElementById('contact-form');
        if (!form) return;

        var fields = [
          { id: 'name', required: true, minLength: 2 },
          { id: 'email', required: true, type: 'email' },
          { id: 'message', required: true, minLength: 10 }
        ];

        var submitBtn = form.querySelector('button[type="submit"], input[type="submit"]');
        var submitOriginalText = submitBtn ? submitBtn.textContent : null;
        var hasSentSubmitEvent = false;

        function findFieldWrapper(el) {
          while (el && el !== form) {
            if (el.classList && el.classList.contains('contact-form-field')) {
              return el;
            }
            el = el.parentNode;
          }
          return null;
        }

        function showError(input, message) {
          var fieldWrapper = findFieldWrapper(input) || input.parentNode;
          if (!fieldWrapper) return;

          var errorEl = fieldWrapper.querySelector('.contact-error');
          if (!errorEl) {
            errorEl = document.createElement('div');
            errorEl.className = 'contact-error';
            fieldWrapper.appendChild(errorEl);
          }

          errorEl.textContent = message;
          fieldWrapper.classList.add('contact-field-invalid');
        }

        function clearError(input) {
          var fieldWrapper = findFieldWrapper(input) || input.parentNode;
          if (!fieldWrapper) return;

          fieldWrapper.classList.remove('contact-field-invalid');
          var errorEl = fieldWrapper.querySelector('.contact-error');
          if (errorEl) {
            errorEl.textContent = '';
          }
        }

        function validateField(field) {
          var input = document.getElementById(field.id);
          if (!input) return true;

          clearError(input);

          var value = (input.value || '').trim();

          if (field.required && !value) {
            showError(input, 'This field is required.');
            return false;
          }

          if (field.minLength && value.length < field.minLength) {
            showError(input, 'Please enter at least ' + field.minLength + ' characters.');
            return false;
          }

          if (field.type === 'email') {
            var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (value && !emailPattern.test(value)) {
              showError(input, 'Please enter a valid email address.');
              return false;
            }
          }

          return true;
        }

        function sendContactSubmitEvent() {
          try {
            if (navigator.doNotTrack === "1" || window.doNotTrack === "1") return;

            var payload = {
              path: window.location.pathname,
              referrer: document.referrer || null,
              eventType: "cta_click",
              label: "contact_form_submit",
              href: "/contact/"
            };

            var url = "https://pqbbjgeapylcengbuvee.functions.supabase.co/log-event";

            if (navigator.sendBeacon) {
              var blob = new Blob([JSON.stringify(payload)], { type: "application/json" });
              navigator.sendBeacon(url, blob);
            } else {
              fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                keepalive: true,
                body: JSON.stringify(payload)
              }).catch(function () {});
            }
          } catch (e) {}
        }

        form.addEventListener('submit', function(event) {
          var isValid = true;

          for (var i = 0; i < fields.length; i++) {
            if (!validateField(fields[i])) {
              isValid = false;
            }
          }

          if (!isValid) {
            event.preventDefault();

            var firstInvalid = form.querySelector('.contact-field-invalid input, .contact-field-invalid textarea');
            if (firstInvalid && typeof firstInvalid.focus === 'function') {
              firstInvalid.focus();
            }
            return;
          }

          if (submitBtn && !submitBtn.disabled) {
            submitBtn.disabled = true;
            if (submitOriginalText != null) {
              submitBtn.textContent = 'Sending…';
            }
            form.classList.add('contact-form-submitting');
          }

          if (!hasSentSubmitEvent) {
            hasSentSubmitEvent = true;
            sendContactSubmitEvent();
          }
        });

        fields.forEach(function(field) {
          var input = document.getElementById(field.id);
          if (!input) return;

          input.addEventListener('blur', function() {
            validateField(field);
          });

          input.addEventListener('input', function() {
            clearError(input);
          });
        });
      })();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      (function() {
        if (!window.mermaid) return;
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
      })();
    </script><script>
  (function () {
    if (navigator.doNotTrack === "1" || window.doNotTrack === "1") return;

    try {
      fetch("https://pqbbjgeapylcengbuvee.functions.supabase.co/log-event", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        keepalive: true,
        body: JSON.stringify({
          path: window.location.pathname,
          referrer: document.referrer || null,
          eventType: "pageview",
        }),
      }).catch(function () {});
    } catch (e) {}
  })();
</script>
<script>
  (function () {
    if (navigator.doNotTrack === "1" || window.doNotTrack === "1") return;

    function sendCtaEvent(label, href) {
      try {
        var payload = {
          path: window.location.pathname,
          referrer: document.referrer || null,
          eventType: "cta_click",
          label: label,
          href: href || null,
        };

        var url = "https://pqbbjgeapylcengbuvee.functions.supabase.co/log-event";

        if (navigator.sendBeacon) {
          var blob = new Blob([JSON.stringify(payload)], { type: "application/json" });
          navigator.sendBeacon(url, blob);
        } else {
          fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            keepalive: true,
            body: JSON.stringify(payload),
          }).catch(function () {});
        }
      } catch (e) {}
    }

    try {
      document.addEventListener("DOMContentLoaded", function () {
        var ctas = document.querySelectorAll("[data-analytics-cta]");
        if (!ctas.length) return;

        ctas.forEach(function (el) {
          var label = el.getAttribute("data-analytics-cta") || "cta";
          el.addEventListener("click", function () {
            sendCtaEvent(label, el.getAttribute("href"));
          });
        });
      });
    } catch (e) {}
  })();
</script>
<script>
  (function () {
    if (navigator.doNotTrack === "1" || window.doNotTrack === "1") return;

    try {
      var params = new URLSearchParams(window.location.search || "");
      if (!params.has("heatmap")) return;

      var sessionId = Math.random().toString(36).slice(2) + Date.now().toString(36);

      var script = document.createElement("script");
      script.src = "https://unpkg.com/heatmap.js@2.0.5/build/heatmap.min.js";
      script.async = true;
      script.onload = function () {
        try {
          var container = document.createElement("div");
          container.id = "wm-heatmap-overlay";
          container.style.position = "fixed";
          container.style.left = "0";
          container.style.top = "0";
          container.style.width = "100%";
          container.style.height = "100%";
          container.style.pointerEvents = "none";
          container.style.zIndex = "9999";
          document.body.appendChild(container);

          var heatmap = window.h337 && window.h337.create({
            container: container,
            radius: 30,
            maxOpacity: 0.6,
            blur: 0.85,
          });
          if (!heatmap) return;

          document.addEventListener("click", function (event) {
            heatmap.addData({
              x: event.clientX,
              y: event.clientY,
              value: 1,
            });

            try {
              var payload = {
                path: window.location.pathname,
                sessionId: sessionId,
                x: event.clientX,
                y: event.clientY,
                viewportWidth: window.innerWidth || null,
                viewportHeight: window.innerHeight || null,
              };

              var url = "https://pqbbjgeapylcengbuvee.functions.supabase.co/heatmap-event";

              if (navigator.sendBeacon) {
                var blob = new Blob([JSON.stringify(payload)], { type: "application/json" });
                navigator.sendBeacon(url, blob);
              } else {
                fetch(url, {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  keepalive: true,
                  body: JSON.stringify(payload),
                }).catch(function () {});
              }
            } catch (e) {}
          });
        } catch (e) {}
      };
      document.head.appendChild(script);
    } catch (e) {}
  })();
</script>
</body>

</html>
