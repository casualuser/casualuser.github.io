%% Autogenerated lemp-stack
graph TD
  classDef default fill:#fff,stroke:#333,stroke-width:1px;
  classDef actor fill:#fff,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5;
  classDef compute fill:#ff9900,stroke:#232f3e,stroke-width:1px,color:#232f3e;
  classDef database fill:#3f8624,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef network fill:#8c4fff,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef storage fill:#e05243,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef security fill:#d93025,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef gateway fill:#8c4fff,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef container fill:#d9a741,stroke:#232f3e,stroke-width:1px,color:#fff;

  subgraph server ["Web Server (Single Node)"]
    direction TB
    vm("<b>Virtual Machine</b><br/><i>compute</i><br/><span style='font-size:0.8em'>Linux (Ubuntu/Debian)</span>")
    class vm compute
    nginx("<b>nginx</b><br/><i>default</i>")
    class nginx default
    fpm("<b>fpm</b><br/><i>default</i>")
    class fpm default
    app("<b>app</b><br/><i>default</i>")
    class app default
    db[("<b>MySQL / MariaDB</b><br/><i>database</i><br/><span style='font-size:0.8em'>Relational Database</span>")]
    class db database
    redis[("<b>Redis</b><br/><i>database</i><br/><span style='font-size:0.8em'>Object Cache (Optional)</span>")]
    class redis database
  end

  %% Orphans
  users(("<b>Web Visitors</b><br/><i>actor</i><br/><span style='font-size:0.8em'>Public Traffic</span>"))
  class users actor
  users("<b>users</b><br/><i>default</i>")
  class users default

  %% Edges
  users -.-> nginx
  nginx -.-> fpm
  fpm -.-> app
  app -.-> db
  app -.-> redis