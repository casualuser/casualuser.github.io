%% Autogenerated business-microservices
graph TD
  classDef default fill:#fff,stroke:#333,stroke-width:1px;
  classDef actor fill:#fff,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5;
  classDef compute fill:#ff9900,stroke:#232f3e,stroke-width:1px,color:#232f3e;
  classDef database fill:#3f8624,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef network fill:#8c4fff,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef storage fill:#e05243,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef security fill:#d93025,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef gateway fill:#8c4fff,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef container fill:#d9a741,stroke:#232f3e,stroke-width:1px,color:#fff;

  subgraph cluster ["CLUSTER"]
    direction TB
    gateway(("<b>API Gateway</b><br/><i>gateway</i>"))
    class gateway network
    svc_a("<b>Identity Service</b><br/><i>service</i>")
    class svc_a compute
    svc_b("<b>Billing Service</b><br/><i>service</i>")
    class svc_b compute
    svc_c("<b>Product Service</b><br/><i>service</i>")
    class svc_c compute
  end

  subgraph data ["DATA"]
    direction TB
    db_a[("<b>Identity DB</b><br/><i>database</i>")]
    class db_a database
    db_b[("<b>Billing DB</b><br/><i>database</i>")]
    class db_b database
    db_c[("<b>Product DB</b><br/><i>database</i>")]
    class db_c database
    bus("<b>Event Bus</b><br/><i>message-broker</i><br/><span style='font-size:0.8em'>Async Events</span>")
    class bus default
  end

  %% Orphans
  user(("<b>Client Apps</b><br/><i>actor</i>"))
  class user actor

  %% Edges
  gateway -.-> svc_a
  gateway -.-> svc_b
  gateway -.-> svc_c
  svc_a -.-> db_a
  svc_a -.-> bus
  svc_b -.-> db_b
  svc_b -.-> bus
  svc_c -.-> db_c