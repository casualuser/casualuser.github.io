%% Autogenerated startup-vm-python
graph TD
  classDef default fill:#fff,stroke:#333,stroke-width:1px;
  classDef actor fill:#fff,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5;
  classDef compute fill:#ff9900,stroke:#232f3e,stroke-width:1px,color:#232f3e;
  classDef database fill:#3f8624,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef network fill:#8c4fff,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef storage fill:#e05243,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef security fill:#d93025,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef gateway fill:#8c4fff,stroke:#232f3e,stroke-width:1px,color:#fff;
  classDef container fill:#d9a741,stroke:#232f3e,stroke-width:1px,color:#fff;

  subgraph vm-layer ["VM-LAYER"]
    direction TB
    nginx(("<b>Nginx</b><br/><i>gateway</i><br/><span style='font-size:0.8em'>Reverse Proxy & SSL</span>"))
    class nginx network
    app("<b>Python App (Gunicorn)</b><br/><i>service</i>")
    class app compute
    db[("<b>PostgreSQL</b><br/><i>database</i><br/><span style='font-size:0.8em'>Local or Managed</span>")]
    class db database
    redis("<b>Redis</b><br/><i>cache</i><br/><span style='font-size:0.8em'>Cache & Broker</span>")
    class redis default
  end

  %% Orphans
  user(("<b>User / Client</b><br/><i>actor</i>"))
  class user actor
  host("<b>Virtual Machine (Linux)</b><br/><i>compute</i><br/><span style='font-size:0.8em'>Ubuntu / Debian</span>")
  class host compute

  %% Edges
  nginx -.-> app
  app -.-> db
  app -.-> redis